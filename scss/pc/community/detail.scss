// ============================================
// COMMUNITY DETAIL PAGE - Piller Template Style
// ============================================

// Design Tokens (Housen Brand)
$brand-green: #3B3F2B;
$accent-color: #E57E62;
$accent-hover: #d66a50;
$accent-light: rgba(229, 126, 98, 0.08);
$dark-text: #1A1A1A;
$secondary-text: #6F6F6F;
$light-text: #999999;
$border-color: #EEEEEE;
$bg-light: #FAFAFA;
$white: #FFFFFF;

#pc-wrap {
	#community-detail-page {
		position: relative;
		background: var(--bg-page);

		// ==========================================
		// HERO SECTION
		// ==========================================
		.community-hero {
			position: relative;
			width: 100%;
			height: 500px;
			overflow: hidden;

			.hero-banner {
				position: relative;
				width: 100%;
				height: 100%;

				img {
					width: 100%;
					height: 100%;
					object-fit: cover;
				}

				.hero-overlay {
					position: absolute;
					top: 0;
					left: 0;
					width: 100%;
					height: 100%;
					background: rgba(59, 63, 43, 0.6);
				}

				.hero-content {
					position: absolute;
					top: 0;
					left: 0;
					width: 100%;
					height: 100%;
					display: flex;
					align-items: center;
					justify-content: center;
					z-index: 1;

		.container {
						max-width: 1300px;
						width: 100%;
						margin: 0 auto;
						padding: 0 40px;
						display: flex;
			flex-direction: column;
						align-items: center;
						justify-content: center;

						.breadcrumb {
							display: flex;
							flex-direction: row;
							align-items: center;
							gap: 8px;
							margin-bottom: 24px;

							span {
								color: $white;
								font-family: $font;
								font-size: 14px;
								font-weight: 400;

								&.separator::before {
									content: 'â€“';
									margin-right: 8px;
									color: $white;
								}
							}

							a {
								text-decoration: none;
								span {
									color: $white;
									transition: color 0.3s ease;
									&:hover {
										color: rgba(255, 255, 255, 0.8);
									}
								}
							}
						}

						.page-title {
							color: $white;
							font-family: $font;
							font-size: 64px;
							font-weight: 400;
							line-height: 1.2;
							margin: 0;
							text-align: center;
						}
					}
				}
			}
		}

		// ==========================================
		// MAIN CONTENT WRAPPER - Premium Editorial Layout
		// ==========================================
		.content-wrapper {
			padding: 80px 40px 100px;
			background: var(--bg-page);

			.main-container {
				max-width: 1200px;
				margin: 0 auto;
				display: flex;
				flex-direction: row;
				gap: 64px;
				align-items: flex-start;

				// ==========================================
				// CENTERED ARTICLE CARD
				// ==========================================
				.article-wrapper {
					flex: 1;
					display: flex;
					justify-content: center;

					.article-card {
						max-width: 760px;
						width: 100%;
						background: $white;
						border-radius: 16px;
						box-shadow: 0 2px 24px rgba(0, 0, 0, 0.08);
						overflow: hidden;

						// ==========================================
						// FEATURED IMAGE - 16:9 ratio, rounded top
						// ==========================================
						.article-featured-image {
							width: 100%;
							aspect-ratio: 16 / 9;
							overflow: hidden;
							margin-bottom: 0;

							img {
								width: 100%;
								height: 100%;
								object-fit: cover;
								display: block;
							}
						}

						// ==========================================
						// ARTICLE HEADER (Meta + Title)
						// ==========================================
						.article-header {
							padding: 48px 56px 0;

							// Meta Info Row - Clean & Minimal
							.article-meta {
								display: flex;
								flex-direction: row;
								align-items: center;
								gap: 12px;
								margin-bottom: 24px;

								.author-avatar {
									width: 40px;
									height: 40px;
									border-radius: 50%;
									object-fit: cover;
									cursor: pointer;
									transition: transform 0.2s ease;

									&:hover {
										transform: scale(1.08);
									}
								}

								.author-name {
									color: var(--text-primary);
									font-family: $font;
									font-size: 14px;
									font-weight: 600;
									cursor: pointer;
									transition: color 0.2s ease;

									&:hover {
										color: $accent-color;
									}
								}

								.meta-dot {
									color: var(--text-secondary);
									font-size: 12px;
									opacity: 0.6;
								}

								.meta-date {
									color: var(--text-secondary);
									font-family: $font;
									font-size: 14px;
									opacity: 0.8;
								}

								.meta-category {
									color: $accent-color;
									font-family: $font;
									font-size: 11px;
									font-weight: 600;
									text-transform: uppercase;
									letter-spacing: 0.5px;
									padding: 4px 10px;
									background: $accent-light;
									border-radius: 12px;
								}
							}

							// Article Title - Large, Clean Typography
							.article-title {
								color: var(--text-primary);
								font-family: $font;
								font-size: 42px;
								font-weight: 700;
								line-height: 1.2;
								letter-spacing: -0.5px;
								margin-bottom: 32px;
							}
						}

						// ==========================================
						// ARTICLE BODY - Clean Content
						// ==========================================
						.article-body {
							padding: 0 56px 48px;

							.toastui-editor-contents,
							.ytb_play {
								color: #1a1a1a;
								font-family: $font;
								font-size: 18px;
								line-height: 1.8;

								p {
									margin-bottom: 24px;
								}

								h1, h2, h3, h4, h5, h6 {
									margin-top: 40px;
									margin-bottom: 20px;
									font-weight: 700;
									color: var(--text-primary);
									line-height: 1.3;
								}

								img {
									border-radius: 12px;
									margin: 32px 0;
									max-width: 100%;
								}

								ul, ol {
									margin-bottom: 24px;
									padding-left: 28px;

									li {
										margin-bottom: 12px;
										position: relative;

										&::marker {
											color: $accent-color;
										}
									}
								}

								blockquote {
									border-left: 4px solid $accent-color;
									padding: 20px 28px;
									margin: 32px 0;
									background: $accent-light;
									border-radius: 0 12px 12px 0;
									font-style: italic;
									font-size: 17px;
								}

								a {
									color: $accent-color;
									text-decoration: underline;

									&:hover {
										color: $accent-hover;
									}
								}
							}
						}

						// Loading Skeleton (at article-card level)
						.article-skeleton {
								padding: 0;
								animation: skeleton-pulse 1.5s ease-in-out infinite;

								.skeleton-image {
									width: 100%;
									aspect-ratio: 16 / 9;
									background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
									background-size: 200% 100%;
									animation: skeleton-shimmer 1.5s infinite;
								}

								.skeleton-meta {
									display: flex;
									flex-direction: row;
									align-items: center;
									gap: 12px;
									padding: 48px 56px 24px;

									.skeleton-avatar {
										width: 40px;
										height: 40px;
										border-radius: 50%;
										background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
										background-size: 200% 100%;
										animation: skeleton-shimmer 1.5s infinite;
									}

									.skeleton-text {
										height: 16px;
										border-radius: 4px;
										background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
										background-size: 200% 100%;
										animation: skeleton-shimmer 1.5s infinite;

										&.skeleton-text-short {
											width: 120px;
										}
									}
								}

								.skeleton-text {
									height: 20px;
									border-radius: 4px;
									margin: 0 56px 16px;
									background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
									background-size: 200% 100%;
									animation: skeleton-shimmer 1.5s infinite;

									&.skeleton-text-title {
										height: 48px;
										margin: 0 56px 32px;
									}
								}
							}

							@keyframes skeleton-shimmer {
								0% {
									background-position: -200% 0;
								}
								100% {
									background-position: 200% 0;
								}
							}

							@keyframes skeleton-pulse {
								0%, 100% {
									opacity: 1;
								}
								50% {
									opacity: 0.8;
								}
							}

						// ==========================================
						// ACTION BAR - Premium Style
						// ==========================================
						.action-bar {
							display: flex;
							flex-direction: row;
							align-items: center;
							justify-content: center;
							gap: 32px;
							padding: 32px 56px;
							border-top: 1px solid rgba(0, 0, 0, 0.06);
							border-bottom: 1px solid rgba(0, 0, 0, 0.06);
							background: #fafafa;

							.action-btn {
								display: flex;
								flex-direction: row;
								align-items: center;
								gap: 8px;
								padding: 12px 24px;
								background: $white;
								border: 1px solid rgba(0, 0, 0, 0.1);
								border-radius: 24px;
								color: var(--text-secondary);
								font-family: $font;
								font-size: 14px;
								font-weight: 500;
								cursor: pointer;
								transition: all 0.2s ease;
								text-transform: none;
								box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);

								svg {
									font-size: 20px;
								}

								&:hover {
									border-color: $accent-color;
									background: $accent-light;
									color: $accent-color;
									transform: translateY(-1px);
									box-shadow: 0 2px 8px rgba(229, 126, 98, 0.2);
								}

								&.liked {
									border-color: $accent-color;
									background: $accent-color;
									color: $white;

									&:hover {
										background: $accent-hover;
									}
								}
							}
						}

						// ==========================================
						// COMMENTS SECTION - Clean & Minimal
						// ==========================================
						.comments-section {
							padding: 48px 56px;

							.section-title {
								color: var(--text-primary);
								font-family: $font;
								font-size: 24px;
								font-weight: 700;
								margin-bottom: 32px;
								letter-spacing: -0.3px;
							}

							// Comment Input - Premium Style
							.comment-input-box {
								margin-bottom: 40px;
								border: 1px solid rgba(0, 0, 0, 0.1);
								border-radius: 12px;
								overflow: hidden;
								background: $white;
								box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);

								input {
									width: 100%;
									padding: 18px 24px;
									border: none;
									outline: none;
									font-family: $font;
									font-size: 15px;
									color: var(--text-primary);
									background: transparent;

									&::placeholder {
										color: var(--text-secondary);
									}
								}

								.comment-input-footer {
									display: flex;
									flex-direction: row;
									justify-content: space-between;
									align-items: center;
									padding: 14px 24px;
									background: #fafafa;
									border-top: 1px solid rgba(0, 0, 0, 0.06);

									.char-count {
										color: var(--text-secondary);
										font-family: $font;
										font-size: 13px;
									}

									.submit-btn {
										padding: 10px 28px;
										background: $brand-green;
										color: $white;
										font-family: $font;
										font-size: 14px;
										font-weight: 600;
										border-radius: 8px;
										text-transform: none;
										transition: all 0.2s ease;
										box-shadow: 0 2px 4px rgba(59, 63, 43, 0.2);

										&:hover {
											background: darken($brand-green, 5%);
										}
									}
								}
							}

							// Comments List - Clean Design
							.comments-list {
								display: flex;
								flex-direction: column;
								gap: 24px;

								.comment-item {
									padding: 24px;
									background: #fafafa;
									border-radius: 12px;
									transition: all 0.2s ease;
									border: 1px solid transparent;

									&:hover {
										background: $white;
										border-color: rgba(0, 0, 0, 0.08);
										box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
									}

									.comment-header {
										display: flex;
										flex-direction: row;
										align-items: center;
										gap: 12px;
										margin-bottom: 12px;

										img {
											width: 42px;
											height: 42px;
											border-radius: 50%;
											object-fit: cover;
											cursor: pointer;
										}

										.comment-author {
											flex: 1;

											.name {
												color: var(--text-primary);
												font-family: $font;
												font-size: 15px;
												font-weight: 600;
												cursor: pointer;
												transition: color 0.3s ease;

												&:hover {
													color: $accent-color;
												}
											}

											.date {
												color: var(--text-secondary);
												font-family: $font;
												font-size: 12px;
											}
										}

										.comment-actions {
											display: flex;
											flex-direction: row;
											gap: 4px;

											button {
												width: 32px;
												height: 32px;
												padding: 0;

												svg {
													font-size: 18px;
													color: var(--text-secondary);
												}

												&:hover svg {
													color: $accent-color;
												}
											}
										}
									}

									.comment-text {
										color: var(--text-primary);
										font-family: $font;
										font-size: 15px;
										line-height: 1.7;
										margin-top: 8px;
									}
								}
							}

							// Pagination
							.pagination-box {
								display: flex;
								justify-content: center;
								margin-top: 32px;

								.MuiPaginationItem-root {
									font-family: $font;
									color: var(--text-secondary);

									&.Mui-selected {
										background: $accent-color;
										color: $white;

										&:hover {
											background: $accent-hover;
										}
									}
									
									&:hover {
										background: var(--bg-section);
									}
								}
							}
						}
					}
				}

				// ==========================================
				// STICKY RIGHT SIDEBAR
				// ==========================================
				.sidebar {
					flex: 0 0 320px;
					width: 320px;
					display: flex;
					flex-direction: column;
					gap: 24px;
					position: sticky;
					top: 120px;
					height: fit-content;
					max-height: calc(100vh - 140px);
					overflow-y: auto;

					.sidebar-section {
						background: $white;
						padding: 24px;
						border-radius: 12px;
						box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);

						.sidebar-title {
							color: var(--text-primary);
							font-family: $font;
							font-size: 16px;
							font-weight: 700;
							margin-bottom: 20px;
							letter-spacing: -0.2px;
						}

						// Search Form
						.search-form {
							display: flex;
							flex-direction: row;
							align-items: center;
							border: 1px solid rgba(0, 0, 0, 0.1);
							border-radius: 8px;
							overflow: hidden;
							background: #fafafa;

							input {
								flex: 1;
								padding: 12px 16px;
								border: none;
								outline: none;
								font-family: $font;
								font-size: 14px;
								background: var(--bg-card);
								color: var(--text-primary);

								&::placeholder {
									color: var(--text-secondary);
								}
							}

									button {
								padding: 12px;
								background: var(--bg-section);
								border-left: 1px solid var(--border-soft);

								svg {
									font-size: 20px;
									color: var(--text-secondary);
								}

								&:hover {
									background: $accent-light;

									svg {
										color: $accent-color;
									}
								}
							}
						}

						// Categories
						.categories-list {
							display: flex;
							flex-direction: column;
							gap: 8px;

							.category-btn {
								width: 100%;
								padding: 12px 16px;
								background: var(--bg-section);
								border: 1px solid transparent;
								border-radius: 8px;
								color: var(--text-secondary);
								font-family: $font;
								font-size: 14px;
								font-weight: 500;
								text-align: left;
								text-transform: none;
								transition: all 0.3s ease;

								&:hover {
									border-color: $accent-color;
									color: $accent-color;
									transform: translateX(4px);
								}

								&.active {
									background: $brand-green;
									color: $white;
									font-weight: 600;
								}
							}
						}

						// Latest Posts
						.latest-posts {
							display: flex;
							flex-direction: column;
							gap: 16px;

							.loading-text,
							.no-data-text {
								color: var(--text-secondary);
										font-family: $font;
										font-size: 14px;
								text-align: center;
								padding: 16px 0;
									}

							.latest-post-item {
								display: flex;
									flex-direction: row;
								gap: 12px;
								cursor: pointer;
								transition: transform 0.3s ease;

								&:hover {
									transform: translateX(4px);

									.post-title {
										color: $accent-color;
									}
								}

								img {
									width: 60px;
									height: 60px;
									min-width: 60px;
									border-radius: 8px;
									object-fit: cover;
								}

								.post-info {
									flex: 1;

									.post-title {
										color: var(--text-primary);
										font-family: $font;
										font-size: 14px;
										font-weight: 600;
										line-height: 1.4;
									display: -webkit-box;
									-webkit-line-clamp: 2;
									line-clamp: 2;
									-webkit-box-orient: vertical;
										overflow: hidden;
										margin-bottom: 6px;
										transition: color 0.3s ease;
									}

									.post-meta {
										display: flex;
										flex-direction: row;
										align-items: center;
										gap: 6px;
										color: var(--text-secondary);
										font-family: $font;
										font-size: 12px;
									}
								}
							}
						}

						// Contact Form
						&.contact-section {
							.contact-form {
								display: flex;
								flex-direction: column;
								gap: 12px;

								input, textarea {
									width: 100%;
									padding: 12px 16px;
									border: 1px solid var(--border-soft);
									border-radius: 8px;
												font-family: $font;
									font-size: 14px;
									outline: none;
									transition: border-color 0.3s ease;
									background: var(--bg-card);
									color: var(--text-primary);

									&::placeholder {
										color: var(--text-secondary);
									}

									&:focus {
										border-color: $accent-color;
											}
										}

								textarea {
									resize: vertical;
									min-height: 100px;
									}

								.contact-btn {
									width: 100%;
									padding: 14px;
									background: $brand-green;
									color: $white;
										font-family: $font;
									font-size: 14px;
									font-weight: 600;
									border-radius: 8px;
									text-transform: none;
									transition: background 0.3s ease;

									&:hover {
										background: darken($brand-green, 5%);
									}
								}
							}
						}

						// Promo Section
						&.promo-section {
							text-align: center;

							.promo-image {
								width: 100%;
								height: 140px;
								object-fit: cover;
								border-radius: 8px;
								margin-bottom: 16px;
									}

							.promo-title {
								color: var(--text-primary);
								font-family: $font;
								font-size: 18px;
								font-weight: 600;
								margin-bottom: 8px;
							}

							.promo-text {
								color: var(--text-secondary);
								font-family: $font;
								font-size: 14px;
								line-height: 1.5;
								margin-bottom: 16px;
							}

							.promo-btn {
								width: 100%;
								padding: 14px;
								background: $brand-green;
								color: $white;
								font-family: $font;
								font-size: 14px;
								font-weight: 600;
								border-radius: 8px;
								text-transform: none;
								transition: background 0.3s ease;

								&:hover {
									background: darken($brand-green, 5%);
								}
							}
						}
					}
				}
			}
		}

		// ==========================================
		// EDIT BACKDROP
		// ==========================================
		.edit-backdrop {
			z-index: 9999;

			.edit-modal {
				width: 500px;
				max-width: 90%;
				background: var(--bg-card);
				border: 1px solid var(--border-soft);
				border-radius: 12px;
				padding: 32px;
				box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);

				.modal-title {
					color: var(--text-primary);
					font-family: $font;
					font-size: 20px;
					font-weight: 600;
					margin-bottom: 20px;
				}

				input {
					width: 100%;
					padding: 14px 16px;
					border: 1px solid var(--border-soft);
					border-radius: 8px;
					font-family: $font;
					font-size: 15px;
					outline: none;
					margin-bottom: 16px;
					background: var(--bg-card);
					color: var(--text-primary);

					&:focus {
						border-color: $accent-color;
					}
					
					&::placeholder {
						color: var(--text-secondary);
					}
				}

				.modal-footer {
					display: flex;
					flex-direction: row;
					justify-content: space-between;
					align-items: center;

					.char-count {
						color: var(--text-secondary);
						font-family: $font;
						font-size: 13px;
					}

					.modal-actions {
						display: flex;
						flex-direction: row;
						gap: 12px;

						.cancel-btn {
							padding: 10px 24px;
							background: var(--bg-section);
							color: var(--text-secondary);
							font-family: $font;
							font-size: 14px;
							font-weight: 500;
							border-radius: 8px;
							text-transform: none;

							&:hover {
								background: var(--border-soft);
							}
						}

						.update-btn {
							padding: 10px 24px;
							background: $brand-green;
							color: $white;
							font-family: $font;
							font-size: 14px;
							font-weight: 500;
							border-radius: 8px;
							text-transform: none;

							&:hover {
								background: darken($brand-green, 5%);
							}
						}
					}
				}
			}
		}
	}
}

// ==========================================
// RESPONSIVE - Tablet
// ==========================================
@media screen and (max-width: 1024px) {
	#pc-wrap #community-detail-page {
		.content-wrapper {
			.main-container {
				flex-direction: column;
				gap: 32px;

				.article-wrapper {
					.article-card {
						max-width: 100%;
					}
				}

				.sidebar {
					width: 100%;
					position: static;
					flex: 1;
				}
			}
		}
	}
}

// ==========================================
// RESPONSIVE - Mobile
// ==========================================
@media screen and (max-width: 768px) {
	#pc-wrap #community-detail-page {
		.community-hero {
			height: 350px;

			.hero-banner .hero-content .container {
				padding: 0 20px;

				.page-title {
					font-size: 42px;
				}
			}
		}

		.content-wrapper {
			padding: 40px 20px 60px;

			.main-container {
				gap: 32px;

				.article-wrapper {
					.article-card {
						.article-header {
							padding: 32px 32px 0;

							.article-title {
								font-size: 28px;
							}
						}

						.article-body {
							padding: 0 32px 32px;
						}

						.action-bar {
							padding: 24px 32px;
							flex-wrap: wrap;
							gap: 16px;
						}

						.comments-section {
							padding: 32px;
						}
					}
				}

				.sidebar {
					.sidebar-section {
						padding: 20px;
					}
				}
			}
		}

		.edit-backdrop .edit-modal {
			padding: 24px;
		}
	}
}

// ==========================================
// RESPONSIVE - Small Mobile
// ==========================================
@media screen and (max-width: 480px) {
	#pc-wrap #community-detail-page {
		.community-hero {
			height: 280px;

			.hero-banner .hero-content .container {
				.page-title {
					font-size: 32px;
				}

				.breadcrumb {
					font-size: 12px;
				}
			}
		}

		.content-wrapper {
			padding: 24px 16px 40px;

			.main-container {
				.article-wrapper {
					.article-card {
						.article-header {
							padding: 24px 24px 0;

							.article-meta {
								flex-wrap: wrap;
								margin-bottom: 16px;

								.meta-dot {
									display: none;
								}
							}

							.article-title {
								font-size: 24px;
								margin-bottom: 24px;
							}
						}

						.article-body {
							padding: 0 24px 24px;

							.toastui-editor-contents,
							.ytb_play {
								font-size: 16px;
							}
						}

						.action-bar {
							padding: 20px 24px;
							gap: 12px;

							.action-btn {
								padding: 10px 16px;
								font-size: 13px;
							}
						}

						.comments-section {
							padding: 24px;

							.section-title {
								font-size: 20px;
							}
						}
					}
				}
			}
		}
	}
}